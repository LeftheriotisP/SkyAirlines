# SkyAirlines – Airport Ticket Reservation System (MEVN)
## Author 
Panagiotis Leftheriotis

## Contact
[p.leftheriotis@gmail.com](mailto:p.leftheriotis@gmail.com)

## Contents

- [Technologies Used](#technologies-used)
- [File Description](#file-description)
- [User Manual](#user-manual)
  - [Database](#database)
  - [Database User Manual](#database-user-manual)
  - [Application start](#application-start)
  - [Application termination](#application-termination)
- [Application pages](#application-pages)
  - [Unregistered User Pages](#Unregistered-User-Pages)
  - [](#)
  - [](#)
    
## Technologies Used

This application is built using the MEVN stack (MongoDB, Express.js, Vue.js, Node.js), along with HTML, CSS, Bootstrap, JavaScript, and jQuery for front-end functionality.

- MongoDB: A NoSQL database used to store flights, users, and tickets. MongoDB Atlas provides cloud-based access, with Node.js and Express.js handling database interactions.

- Express.js: A Node.js framework managing HTTP requests and routes, used to connect the front-end with the MongoDB database for tickets, users, and flights.

- Vue.js: A JavaScript framework used to create dynamic and reusable front-end components, including features like Dark Mode and dynamic tables for ticket history.

- Node.js: Provides the server environment and handles requests via Express.js, including email notifications and database connections.

- HTML & CSS: Define the structure and styling of pages, including responsive design for different devices.

- Bootstrap: Used for layout, styling, and prebuilt components such as cards, tables, and buttons.

- JavaScript & jQuery: Adds interactivity, handles user inputs, communicates with the server using Fetch API, and implements features like the anagram game, Dark Mode, and dynamic maps.

## File Description
## User Manual
### Database
- The MongoDB database was used to store the data used by the application, as mentioned in Section 3. While an attempt was made to use the classic MongoDB, due to connection and functionality problems between the database with the application and the Node.js Server, MongoDB Atlas was used, which is a cloud version of the regular MongoDB.
- The database used is called myFirstDB and consists of 4 collections: registered users, flights, tickets and transactions. Registered users are those who have an account in the application, flights are all flights offered by the airline, tickets are all user tickets and transactions are the user's ticket purchases and billing information.
- The image below shows a user's document. Each user has as fields the unique id that is automatically generated from the database “_id”, the name “firstname”, the surname “lastname”, the access name “username”, the access password “password”, the contact phone number “tel”, the identifier “trait” that is automatically entered for each user who creates an account and takes values ​​depending on whether they are a simple user “user” or an administrator “admin” and the unique 32-digit code “uuid”, unique for each user, that is automatically generated through the “UUID” library and is automatically entered with each user registration and may have the discount code “discountCode” if they have won the anagram game.
  
![dbimg1](https://github.com/user-attachments/assets/619f11ea-5af9-45ff-9582-812f6f744a09)


These values, except for “_id”, “trait”, “uuid” and “discountCode”, are filled in either by the user when creating an account or by the administrator when creating a user account or editing an existing user.
The following image shows the document of a flight. Each flight has as fields the unique id automatically generated by the database “_id”, the departure airport “departureAirport”, the arrival airport “arrivalAirport”, the departure country “departureCountry”, the destination country “destinationCountry”, the departure date “departureDate”, the total number of seats on the flight “totalSeats”, a table containing data for each seat on the flight “seats”, the cost of business class tickets “businessticketPrice” and the cost of economy class tickets “economyticketPrice”. All fields, except for “_id” and the “seats” table, are filled in by the application administrator when creating or editing a flight. The type of fields is shown on the right side of the image.

![dbimg2](https://github.com/user-attachments/assets/acfb4a8b-37b4-4cbc-8f1a-5274e376acec)

The following image shows the content of the “seats” table of the same record in more detail. Specifically, depending on the number of seats, an array is created whose size is the total number of seats “totalSeats”. For each seat, it contains 4 fields: the seat number “seatNumber”, the seat type “seatType”, the Boolean variable “isReserved” and the unique id that is automatically generated by the database “_id”. The “seats” table as well as the fields of each seat are automatically filled in when a flight is created by the application. The seat number “seatNumber” has the value “SeatN”, where N = 1,2,3,…, totalSeats. The seat type “seatType” is “business” for the first 12 seats of each flight and “economy” for the rest. The variable “isReserved” takes the value “false” for all seats when creating a flight as all seats are empty and when a user books a seat then it takes the value “true”.

![dbimg3](https://github.com/user-attachments/assets/f189841e-2afe-41df-94e7-d960d1b471ad)

The following image shows the document of a ticket. Each ticket has as fields the unique id automatically generated by the database “_id”, the “_id” of the user who booked the ticket “userId”, the “_id” of the flight related to the ticket “flightId”, the unique id of the transaction “uniqueTransaction” automatically generated using the UUID library and related to the transaction contained in the ticket, the traveler’s name “firstname”, the traveler’s surname “lastname”, the traveler’s date of birth “birthDate”, the traveler’s identity number “idNumber”, the ticket seat number “seatNumber”, the ticket seat type “seatClass” and the ticket cost “ticketCost”. The type of each field is shown on the right of the image.

![dbimg4](https://github.com/user-attachments/assets/748e967c-b416-49df-a20a-354c76131866)

The fields firstname, lastname, birthDate, idNumber and seatNumber are filled in by the user when purchasing tickets. The fields seatClass and ticketCost are automatically filled in by the user's selected seat. The fields userId and flightId are automatically filled in by the user's details and the details of the flight he has selected, while the field uniqueTransactionId is automatically created, with the method mentioned, and is the same for all tickets that the user booked at the same time so that they can be grouped into one transaction.
The following image shows the document of a transaction. Each transaction has as fields the unique id automatically generated by the database _id, the unique userId of the user who made the transaction, the ticketsId which is a table with the id of each ticket included in the transaction, the total cost of the transaction totalCost, the discount code used by the user discountCode which can be empty if not used, the email of the user to whom the transaction ticket details were sent, the type of the user's credit card cardType and the 16-digit number of the user's credit card cardNumber. The type of the fields is shown on the right of the image.

![dbimg5](https://github.com/user-attachments/assets/71c1739d-ae20-4ffe-8b37-06b52ee172c1)

The _id element is automatically generated by the MongoDB database, the userId element is obtained from the application through the user's sign-in, the ticketsIds are obtained through the application according to the userId and flightId they contain, the totalCost is automatically calculated from the user's selected seats and depending on whether he has filled in a correct discount code, while there may not be a discount code discountCode. The email, cardType and cardNumber elements are filled in by the user through the application on the ticket purchase page.
The database contains several records that were used during the development of the application to test the various functions, while there are also normal records.

### Database User Manual
The connection of the Node.js server to the MongoDB myFirstDB database is made in the app.js file as shown in the code snippets below.
![dbconnection1](https://github.com/user-attachments/assets/ecec9a23-0716-4657-9254-94b4997c0334)

![dbconnection2](https://github.com/user-attachments/assets/53930a7a-154a-4a64-ab99-6de6f5d007ab)

The excerpts are from the app.js file on line 23 which is the connection string to the cloud database generated by MongoDB Atlas and on lines 56-71 where the application connects to the database via MURL.
To display the database it is recommended to download the MongoDB Compass application. 
Specifically:
Step 1: Install the MongoDB Compass application.
Step 2: Click on the New Collection button located at the top left of the application as in the image below

![compassinstall1](https://github.com/user-attachments/assets/822fa584-905d-471f-925c-8ba3ae2ed8e3)

Step 3: In the URI field, paste the following connection string:
mongodb+srv://student:1234@cluster0.vnybknh.mongodb.net/myFirstDB?retryWrites=true&w=majority
The connection string is generated by MongoDB Atlas and can also be found in the app.js file, on line 23, in the MURL variable as mentioned earlier.
Step 4: Click the Connect button located below and to the right of the URI.
Step 5: Click on the database named “myFirstDB” from the menu on the left

![compassinstall2](https://github.com/user-attachments/assets/08b76fe6-f1ea-44c1-b3d7-19c31ec30e0b)

Step 6: Now you can see the collections of the application database and you can select a specific one to view its documents.

### Application start
Step 1: To boot the Node.js server, enter the path where the server is located through the terminal, in this case inside the “js” folder.
Step 2: The command “npm start” is written in the terminal. With this command, nodemon will start the server and its connection to the database. The connection to the database is made using the Mongoose library and MURL, as shown in the following function in the app.js file.

![appstart1](https://github.com/user-attachments/assets/78167177-bf81-42fe-ad96-a92a9fe0b975)

Step 3: If the server is connected, you will see the messages “Your MongoDB connector is on…” and “Your server is up and running...” in the terminal, which means that the connection was successful and the server has started. If the server has booted successfully and is connected to the database, then the airline application is fully functional and you can use it both from the admin side and from the user side.

![appstart2](https://github.com/user-attachments/assets/2aa42721-8bd2-4497-bf5b-5137221ea16f)

Step 4: Start from the “homepage.html” page, which is the home page of the unregistered user, by clicking on the specific file.

### Change email address
In order for the server to be able to send email to the user, an email address and the password for it are required so that emails can be sent from it. During the tests in creating the function, it was found difficult to use Gmail accounts, for this reason it is recommended to use an Outlook account. To change the sending email, lines 28 and 39 of app.js file containing the email address and line 29 containing the password must be replaced with the corresponding information of the email you want to use.

###Possible problems
If you encounter a problem when starting the application, make sure that on line 19 in the app.js file, inside the quotes, the name of the folder in which the application files are located is written, followed by “/html”. In this case, it is “SkyAirlines” as shown in the image below.

![appstart3](https://github.com/user-attachments/assets/7bfb1969-92c2-4e84-b202-68561724c460)

If there is a problem connecting, the message “Error connecting to MongoDB:” will appear, followed by the relevant problem. The application “listens” on port 3000 of localhost as shown in line 68 of the following image from the app.js file.

![appstart4](https://github.com/user-attachments/assets/d1c320b4-2d65-490f-83d3-29257841da4f)

In case of problems with starting the server, it is recommended to change this port to another one, such as 3001, as the previous port may be used by another application on your system. Also, in case of problems with starting the application, it is recommended to use the command “npm install” in the terminal of the application path, which command will search for all packages used by the application and check if they exist or install them if they are missing.

### Application termination
To terminate the application, the command Ctrl+C is given in the terminal where the message “Terminate batch job (Y/N)” will appear and to complete the termination, it is enough to write the letter Y and Enter or the command Ctrl+C again.

## Application Pages
### Unregistered User Pages
We will start by demonstrating the pages that an unregistered user has access to.
#### Home
The application home page for a user who has not registered in the application is “Home” which corresponds to the file “homepage.html” shown in the image below.

![home1](https://github.com/user-attachments/assets/a9a4b81b-635d-4c18-9810-75bc20bc5547)

On this page the supported functions are:
1) User navigation to the Flights, Sign-up and Sign-in pages corresponding to the files “flights.html”, “signUp.html” and “signIn.html” via the navigation bar at the top of the page.
2) Switch the application colors to darker tones using the “Dark Mode” button on the right side of the navigation bar. The result of this option is shown in the image below. This option remains on the remaining pages.
3) Interactive map of Europe where the user can hover over the countries and some information about that country and an image of a famous landmark of its capital will appear. In addition, when the user hovers over a country, it changes color from dark blue to yellow as shown below.
   
![interactiveMap](https://github.com/user-attachments/assets/ddd2b195-d489-44fd-a654-ca6d1a029756)

4) The user can click on one of the available countries and will be taken to the Flights page.

#### Flights

The Flights page corresponds to the file “flights.html” which contains the available flights offered by the airline.
The supported functions are:
1) User navigation to the Home, Sign-up and Sign-in pages which correspond to the files “homepage.html”, “signUp.html” and “signIn.html” via the navigation bar at the top of the page.
2) View available flights offered by the company through cards from the Bootstrap library. The user can read the destination, departure date, departure and destination airport for each available flight. Only flights that are available are displayed, i.e. those with a departure date after the date the user has visited the application.

![flights1](https://github.com/user-attachments/assets/1cc7fb16-20c0-473e-8ae7-4337864b926a)

3) Search bar for available flights based on destination country. The user can type the name of the country in whole or in part and the application will search for all available flights where the name of the destination country matches the search field. In the image below, we will type “gr” in the search bar and the page will only show us available flights where the destination country contains the phrase “gr”

![flights2](https://github.com/user-attachments/assets/af40fcee-2cba-4baa-a9f1-bcff3567979c)

If there are no flights available then none will be displayed.

4) Prompt message for user registration or login. The user who has visited this specific page has not yet registered or logged in, while this is required to purchase tickets. To direct the user to create an account or log in in case they do not know how, there is a message that they can click on and direct them to the “Sign-up” registration page and the “Sign-in” login page respectively. As shown below, the prompt messages are located between the navigation bar and the search field and the user can click on the blue letters respectively.

![flights3](https://github.com/user-attachments/assets/649b76ac-2cca-437b-a51a-b2ffd1e888fc)

5) Dark Mode function if selected from the Home page as shown in the image below.

![flights4](https://github.com/user-attachments/assets/df528490-5884-4a71-8e34-4525b9ef11be)

#### Sign-up
The Sign-up page corresponds to the file “signUp.html” in which the user performs the process of creating an account and registering in the application. The functions supported by the Sign-up page are:
1) Creating an account and registering the user by filling in the fields of the page with the corresponding information. The user must fill in all the fields to register in the application. The fields include first name “Firstname”, last name “Lastname”, login name “Username”, login code “password” and contact number “Telephone”.

![signup1](https://github.com/user-attachments/assets/97c911c3-b883-4891-862c-dfffbf4822b5)

To demonstrate the functionality, we will fill in the fields with values ​​and register in the application. Fill in the fields with the indicative values ​​shown in the image and click the “Sign Up” button at the bottom of the page.

![signup2](https://github.com/user-attachments/assets/f985b910-e77b-4bab-b3cc-af042cecfd4a)

If the registration was successful, we will be taken to the Home page of registered users corresponding to the file “user_homepage.html”. Below is the registration we made in the MongoDB Atlas database.

![signup3](https://github.com/user-attachments/assets/7ed357a1-1978-4034-bd9f-d5b50c758460)

2) “Dark Mode” function if it has been selected from the Home page.

3) User navigation to the Home, Flights and Sign-in pages corresponding to the files “homepage.html”, “flights.html” and “signIn.html” via the navigation bar at the top of the page.

#### Sign-in
The Sign-in page corresponds to the file “signIn.html” in which the user performs the login process to the application with an existing account. The functions supported by the Sign-in page are:
1) User navigation to the Home, Flights and Sign-up pages corresponding to the files “homepage.html”, “flights.html” and “signUp.html” via the navigation bar at the top of the page.
2) Connecting the user to an existing account in the application by filling in the “Username” and “Password” fields with the appropriate information and selecting the “Sign In” button at the bottom of the page.
   
![signin1](https://github.com/user-attachments/assets/1501954f-21ab-4df5-b2c7-b4c25e13f548)

To demonstrate the function, we will fill in the fields with values ​​and connect to the account we created previously during Sign Up.
As shown in the image below, we filled in the fields with the username and password values ​​of the account and then click the Sign In button.

![signin2](https://github.com/user-attachments/assets/309ca62c-ab99-4693-9269-c007a41ddb41)

If the connection was successful, we will be transferred to the registered user's home page “Home” which corresponds to the file “user_homepage.html”. If the information we filled in was incorrect, then a corresponding message will appear as shown in the image below in red letters and to connect we will have to enter the correct account information and click the Sign In button again.

![signin3](https://github.com/user-attachments/assets/0751954d-20ed-49ba-aee3-e259e30d875f)

3) “Dark Mode” function if selected from the Home page

### Rewgistered User Pages

### Administrator Pages
To access the administrator pages and functions, the user must log in to their account from the Sign In page that corresponds to the “signIn.html” file as previously mentioned in the unregistered user pages. Specifically, there is only one administrator account in the application and there is no function to create such an account through the application. The administrator login details are as follows:
Username: admin
Password: admin
To log in to their account, the administrator needs to fill in these details in the corresponding fields of the Sign In page as shown in the image below.

![admin1](https://github.com/user-attachments/assets/356ab2f7-d957-4b06-bf4e-e8aced1ceb0b)

If the administrator logs in successfully, he will be transferred to the initial management page “Home” corresponding to the file “admin_homepage.html” which is shown in the image below.

![admin2](https://github.com/user-attachments/assets/0298a67a-9d7c-4b00-9efc-96261fafb1e3)

#### Home
The admin Home page corresponds to the file “admin_homepage.html” and is the home page of the application administrator. The functions of this page are:
1) Administrator navigation to the Flight Administration and User Administration pages corresponding to the files “admin_flights.html” and “admin_users.html” via the navigation bar at the top of the page.
2) Switch the application colors to darker tones using the “Dark Mode” button on the right side of the navigation bar. The result of this option is shown in the image below. This option remains on the remaining pages.
3) Log out of the application via the Sign-Out button located in the navigation bar. If the administrator wants to log out of his account, he must click the Sign Out button and then a confirmation message will appear as shown below.

![admin3](https://github.com/user-attachments/assets/93fa5310-a243-4819-ab44-91725deaf471)

Here the administrator can confirm his disconnection by pressing the OK button, otherwise he can cancel his disconnection and remain on the same page by pressing the Cancel button. In case he presses OK, he will be transferred to the Home page of the unregistered user.

#### Flight Administration
The Flight Administration page corresponds to the admin_flights.html file and contains functions for managing the application's flights. The page contains the following functions:
1) Administrator navigation to the Home and User Administration pages that correspond to the “admin_homepage.html” and “admin_users.html” files via the navigation bar at the top of the page.
2) Create a new flight: The administrator can create a new flight by appropriately filling in the fields under the title “Create New Flight”. These fields are the departure airport “Departure Airport”, the arrival airport “Arrival Airport”, the departure country “Departure Country”, the destination country “Destination Country”, the departure date and time “Departure Date”, the total seats of the flight “Total Seats”, the cost of business seats “Business Ticket Price” and the cost of economy seats “Economy Ticket Price”. The departure country and destination country fields are dropdown lists and the administrator selects one of the available countries. After properly filling in the fields, he must press the Create flight button to create a flight with these details.
   
![createFlight1](https://github.com/user-attachments/assets/87feecad-1ee3-4ee6-b6f6-7240b71b9150)

Below we will fill in the fields to demonstrate the function.

![createFlight2](https://github.com/user-attachments/assets/62bc0555-ab24-43a1-a6e7-0192c39395b2)

After clicking the Create flight button, the record will be created in the database as shown below.

![createFlight3](https://github.com/user-attachments/assets/1a7eaccd-ba01-4c90-9c2f-f0f8aab539f4)

Please note that the flight departure date and time is stored in the database in UTC time and for this reason it differs from the time we chose when creating the flight.
3) Search for flights from the database and display their details:
The administrator can search for flights stored in the database by filling in the departure country fields “Departure Country” and departure date “Departure Date” with appropriate information and pressing the Search button located in the middle of the page.

![createFlight4](https://github.com/user-attachments/assets/f43e2e97-f288-4180-8d45-d9be85f5837b)

If there are no flights with these details in the database, then an appropriate message is displayed.

![createFlight5](https://github.com/user-attachments/assets/99fc06fe-94ff-4bbf-8c79-cb7fef767f03)

If there are flights with these details, they are displayed in a table format as shown below.

![searchflight1](https://github.com/user-attachments/assets/aa6df62e-f113-4170-b45f-5b12fba41fd8)

The table shows the unique flight ID, the remaining flight details we mentioned previously, as well as the number of tickets that have been purchased.

4) Flight Edit: The administrator can edit the details of an existing flight by filling in the unique flight ID “Flight ID” and filling in the flight fields that need editing and pressing the Update Flight button. The Flight ID can be obtained from the flight search as mentioned earlier.

![editFlight1](https://github.com/user-attachments/assets/fe1f42d7-2d28-43e1-a9d5-a076615a310d)

Next, we will edit the flight we created in the previous example. Specifically, we will change the arrival airport “Departure Country” from “BCL” to “MLN” and the departure date “Departure Date” from 20/09/2023 to 21/09/2023.

![editFlight2](https://github.com/user-attachments/assets/3168c415-e6ae-4939-bea5-7e103dc8b7a1)

Below are the changes to the flight through the database.

![editFlight3](https://github.com/user-attachments/assets/4ad4b876-2912-4a75-9ada-8e26cc88cc4f)

We can observe through the unique id that changes were made to the details of the same flight.
5) Delete flight. The administrator can permanently delete a flight from the database and therefore from the application by filling in the unique id of the flight “Flight ID” and pressing the Delete Flight button. The Flight ID can be obtained from the flight search as mentioned previously.

![deleteFlight1](https://github.com/user-attachments/assets/c9b5f84c-add2-4d17-b31f-332485a33782)

When the Delete Flight button is pressed, a confirmation message will appear on the administrator's screen as shown below.

![deleteFlight2](https://github.com/user-attachments/assets/964c85c2-84b7-48bd-8ea9-55d83c7bf440)

If the OK button is pressed, the flight will be deleted from the database, while if the Cancel button is pressed, the deletion will be canceled.

6) “Dark Mode” function if it has been selected from the Home page.
7) Log out of the application via the Sign-Out button located in the navigation bar. If the administrator wants to log out of his account, he must click the Sign Out button and then a confirmation message will appear as shown below.

![deleteFlight3](https://github.com/user-attachments/assets/f56fe1ae-24d4-41e5-9efa-66b2cae9c286)

Here the administrator can confirm his logout by pressing the OK button, otherwise he can cancel his logout and remain on the same page by pressing the Cancel button. In case he presses OK he will be transferred to the Home page of the unregistered user.

#### User Administration
The User Administration page corresponds to the file “admin_users.html” and contains user management functions. Specifically, the functions contained are:
1) Administrator navigation to the Home and Flight Administration pages corresponding to the files “admin_homepage.html” and “admin_flights.html” via the navigation bar at the top of the page
2) Display the total number of registered users: At the top of the page, just below the navigation bar, there is a message that looks up the database and displays the number of registered users as shown in the image below. At this time, there are 27 registered users.

![userAdmin](https://github.com/user-attachments/assets/c77abaf7-f3d8-4e12-bd82-b22a898b8c60)

3) Create a new user: The administrator can create a new user account in the application by filling in the fields “First Name”, “Last Name”, “Username”, “Password”, “Telephone” and clicking the Create User button.

![userAdmin1](https://github.com/user-attachments/assets/bfe381b3-b9aa-4dc5-92b8-c6f0c7edc107)


